(this.webpackJsonpfindr=this.webpackJsonpfindr||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/mario.fd0f1148.png"},35:function(e,t,a){e.exports=a(64)},40:function(e,t,a){},43:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},52:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),l=(a(40),a(41),a(42),a(43),a(8)),c=a(14),s=a(9),p=a(10),u=a(11),d=a(69),m=a(65),f=a(66),h=a(67),y=a(70),g=a(68),v=(a(48),a(17)),b=Object(v.b)({name:"notifications",initialState:{value:void 0},reducers:{setNotification:function(e,t){e.value=t.payload},clearNotification:function(e,t){e.value=void 0}}}),E=b.actions,O=E.setNotification,w=E.clearNotification,j=b.reducer,N=a(5),T=a.n(N),k=(a(49),a(30)),S=a.n(k),P=new(function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"createIcon",value:function(){var e=document.createElement("div");e.className="icon-style";var t=document.createElement("img");return t.src=S.a,t.className="mario",e.appendChild(t),e}}]),a}(N.Icon)),C=a(13),L=a(16),I=a(24),D=a(1),x=(a(50),a(31)),M=a(32),A=a(7),B={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"},z=function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onDrawCreate=function(t){var a=e.props.onCreated;e.props.leaflet.layerContainer.addLayer(t.layer),a&&a(t)},e}return Object(c.a)(a,[{key:"createLeafletElement",value:function(e){return R(e)}},{key:"componentDidMount",value:function(){Object(I.a)(Object(L.a)(a.prototype),"componentDidMount",this).call(this);var e=this.props.leaflet.map,t=this.props.onMounted;for(var n in B)this.props[n]&&e.on(B[n],this.props[n]);e.on(T.a.Draw.Event.CREATED,this.onDrawCreate),t&&t(this.leafletElement)}},{key:"componentWillUnmount",value:function(){Object(I.a)(Object(L.a)(a.prototype),"componentWillUnmount",this).call(this);var e=this.props.leaflet.map;for(var t in e.off(T.a.Draw.Event.CREATED,this.onDrawCreate),B)this.props[t]&&e.off(B[t],this.props[t])}},{key:"componentDidUpdate",value:function(e){if(Object(I.a)(Object(L.a)(a.prototype),"componentDidUpdate",this).call(this,e),Object(x.isEqual)(this.props.draw,e.draw)||this.props.position!==e.position)return!1;var t=this.props.leaflet.map;return this.leafletElement.remove(t),this.leafletElement=R(this.props),this.leafletElement.addTo(t),null}}]),a}(M.a);function R(e){var t=e.leaflet.layerContainer,a=e.draw,n=e.edit,o=e.position,r={edit:Object(C.a)({},n,{featureGroup:t})};return a&&(r.draw=Object(C.a)({},a)),o&&(r.position=o),new N.Control.Draw(r)}z.propTypes=Object(C.a)({},Object.keys(B).reduce((function(e,t){return e[t]=D.PropTypes.func,e}),{}),{onCreated:D.PropTypes.func,onMounted:D.PropTypes.func,draw:D.PropTypes.shape({polyline:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),polygon:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),rectangle:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),circle:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),marker:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool])}),edit:D.PropTypes.shape({edit:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),remove:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),poly:D.PropTypes.oneOfType([D.PropTypes.object,D.PropTypes.bool]),allowIntersection:D.PropTypes.bool}),position:D.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:D.PropTypes.shape({map:D.PropTypes.instanceOf(N.Map),layerContainer:D.PropTypes.shape({addLayer:D.PropTypes.func.isRequired,removeLayer:D.PropTypes.func.isRequired})})});var _=Object(A.b)(z),F={lat:30.590485,lng:114.324765,zoom:15,style:{width:"100%",height:"95vh"},use:"openstreetmap",openstreetmap:[{name:"Simple",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png",selected:!0},{name:"Black and White",attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"},{name:"Toner",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png"},{name:"Watercolor",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"}]},G=function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).mapRef=Object(n.createRef)(),e.setCircleRef=function(t){e.circleBounds=t.leafletElement.getBounds(),e.mapRef.current.leafletElement.setMaxBounds(e.circleBounds)},e._onEditPath=function(e){console.log(e)},e._onDeleted=function(e){console.log(e)},e._onCreate=function(t){console.log(t);try{var a=t.layer.toGeoJSON();console.log(a);var n=t.layer.getBounds();e.circleBounds.contains(n)||(t.layer.remove(),e.props.sendNotification({message:"Draw your shape inside circle only!"}))}catch(o){console.log(o)}},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(d.a,{center:this.props.location?[this.props.location.lat,this.props.location.lng]:[F.lat,F.lng],zoom:F.zoom,style:F.style,className:this.props.className,ref:this.mapRef},!!this.props.location&&o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{ref:this.setCircleRef,center:[this.props.location.lat,this.props.location.lng],radius:3e3}),o.a.createElement(f.a,{position:[this.props.location.lat,this.props.location.lng],draggable:!1,icon:P,title:"You are here",alt:"mario"})),o.a.createElement(h.a,{position:"topright"},F[F.use].map((function(e){return o.a.createElement(h.a.BaseLayer,{name:e.name,checked:e.selected},o.a.createElement(y.a,{attribution:e.attribution,url:e.url}))})),o.a.createElement(h.a.Overlay,{name:"My Area",checked:!0},o.a.createElement(g.a,null,o.a.createElement(_,{position:"bottomright",onEdited:this._onEditPath,onCreated:this._onCreate,onDeleted:this._onDeleted,draw:{rectangle:{shapeOptions:{stroke:!0,color:"#ee88ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!1},metric:!1},circle:!1,polyline:!1,marker:!1,circlemarker:!1,polygon:{showLength:!0,allowIntersection:!1,drawError:{color:"#b00b00",timeout:1e3},shapeOptions:{stroke:!0,color:"#ee88ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!1}}}})))))}}]),a}(n.Component),J=Object(u.b)((function(e){return{location:e.location.value,user:e.user.value}}),(function(e){return{sendNotification:function(t){return e(O(t))}}}))(G),U=(a(52),localStorage.getItem("authToken")),W=localStorage.getItem("user"),Y=Object(v.b)({name:"user",initialState:{value:W?JSON.parse(W):void 0,loggedIn:!!U,authToken:U},reducers:{logOut:function(e){e.value=void 0,e.loggedIn=!1,e.authToken=void 0,localStorage.removeItem("authToken"),localStorage.removeItem("user")},logInSync:function(e,t){e.value=t.payload.value,e.authToken=t.payload.authToken,e.loggedIn=!0,localStorage.setItem("authToken",t.payload.authToken),localStorage.setItem("user",JSON.stringify(t.payload.value))}}}),q=Y.actions,V=q.logOut,$=q.logInSync,H=function(e){return e.user.value},Z=function(e){return e.user.authToken},K=Y.reducer,Q=localStorage.getItem("location"),X=Object(v.b)({name:"location",initialState:{value:Q?JSON.parse(Q):void 0,locationSupport:!!navigator.geolocation},reducers:{setLocation:function(e,t){var a={lat:t.payload.lat,lng:t.payload.lng};e.value=a,localStorage.setItem("location",JSON.stringify(a))},removeLocation:function(e){e.value=void 0,localStorage.removeItem("location")}}}),ee=X.actions,te=ee.setLocation,ae=ee.removeLocation,ne=X.reducer;function oe(e){var t=Object(u.c)(),a=Object(u.d)(Z),n=Object(u.d)(H);return o.a.createElement("nav",{className:e.className},o.a.createElement("ul",{className:"list"},o.a.createElement("li",{className:"nes-text is-primary list-item"},o.a.createElement("a",{className:"nes-pointer",href:"/findr"},"findr")),!!n&&o.a.createElement("li",{className:"nes-text list-item"},n.username),!!a&&o.a.createElement("li",{className:"nes-text is-error list-item"},o.a.createElement("button",{className:"logout-button",onClick:function(){t(V()),t(ae())}},"logout"))))}var re=a(22),ie=a.n(re),le=function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getApplicationNode=function(){return document.getElementById(n.props.applicationNode)},n.activateModal=function(){n.setState({modalActive:!0})},n.deactivateModal=function(){n.setState({modalActive:!1})},n.state={modalActive:!0===e.active},n}return a}(n.Component),ce=(a(59),a(60),function(e){return e.locationSupport?o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal-body"},o.a.createElement("h1",null,"Please give us location access")),o.a.createElement("footer",{className:"modal-footer"},o.a.createElement("button",{id:"location-modal-give-access",className:"nes-btn is-success",onClick:e.setLocation},"Sure!"),o.a.createElement("button",{id:"location-modal-cancel",className:"nes-btn is-error",onClick:e.denyLocation},"NO"))):o.a.createElement("p",{id:"location-modal-confirm-location"},"Your browser does not support geolocation")}),se=(a(61),function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).submitForm=function(e){e.preventDefault(),n.props.login(n.state)},n.updateUserName=function(e){var t=e.target.value.trim();/^[A-Za-z0-9_-]+$/.test(t)?n.setState(Object(C.a)({},n.state,{username:t,errors:Object(C.a)({},n.state.errors,{username:void 0})})):n.setState(Object(C.a)({},n.state,{errors:Object(C.a)({},n.state.errors,{username:"can only contain alphanumeric _ and -"})}))},n.updateGender=function(e){n.setState(Object(C.a)({},n.state,{gender:e.target.value}))},n.updatePreferences=function(e){n.setState(Object(C.a)({},n.state,{preference:e.target.value}))},n.state={username:void 0,gender:"male",preference:"girls",errors:{username:void 0,gender:void 0,preference:void 0}},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.submitForm},o.a.createElement("div",{className:"nes-field"},o.a.createElement("label",{htmlFor:"username_field",style:{fontSize:"1rem"}},"Username"),o.a.createElement("input",{type:"text",id:"username_field",className:"nes-input ".concat(this.state.errors.username?"is-error":""),style:{backgroundColor:"whitesmoke"},onBlur:this.updateUserName}),!!this.state.errors.username&&o.a.createElement("p",{className:"nes-text is-error"},this.state.errors.username)),o.a.createElement("div",{className:"orientation-details"},o.a.createElement("div",{className:"nes-field nes-container with-title radio-input"},o.a.createElement("p",{className:"title",style:{backgroundColor:"whitesmoke"}},"Gender"),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",className:"nes-radio",name:"gender",value:"male",checked:"male"===this.state.gender,onChange:this.updateGender}),o.a.createElement("span",null,"Male")),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",className:"nes-radio",name:"gender",value:"female",checked:"female"===this.state.gender,onChange:this.updateGender}),o.a.createElement("span",null,"Female"))),o.a.createElement("div",{className:"nes-field nes-container with-title radio-input"},o.a.createElement("p",{className:"title",style:{backgroundColor:"whitesmoke"}},"Preference"),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",className:"nes-radio",name:"preference",value:"guys",checked:"guys"===this.state.preference,onChange:this.updatePreferences}),o.a.createElement("span",null,"Guys")),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",className:"nes-radio",name:"preference",value:"girls",checked:"girls"===this.state.preference,onChange:this.updatePreferences}),o.a.createElement("span",null,"Girls")))),o.a.createElement("button",{type:"submit",className:"nes-btn is-primary"},"Let's go!"))}}]),a}(n.Component)),pe=(a(62),function(e){var t=e.className?"la-ball-8bits ".concat(e.className):"la-ball-8bits";return o.a.createElement("div",{className:t},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))}),ue=function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setLocation=function(){n.setLoading(!0),navigator.geolocation.getCurrentPosition((function(e){n.setLoading(!1),n.props.setLocation({lat:e.coords.latitude,lng:e.coords.longitude})}),n.denyLocation,{enableHighAccuracy:!0,timeout:5e3})},n.denyLocation=function(){n.setLoading(!1),n.props.setLocation({lat:30.590485,lng:114.324765})},n.setLoading=function(e){n.setState(Object(C.a)({},n.state,{loading:e}))},n.state={loading:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return(void 0===this.props.location||!1===this.props.isLoggedIn)&&o.a.createElement(ie.a,{titleText:"Location Modal",initialFocus:"#login-dialog-root",getApplicationNode:this.getApplicationNode,underlayClickExits:!1,verticallyCenter:!0,underlayStyle:this.props.style},o.a.createElement("div",{id:"login-dialog-root",className:"nes-dialog is-rounded modal custom-pointer"},this.state.loading?o.a.createElement("div",{className:"location-modal-spinner-parent"},o.a.createElement("div",null,"Loading..."),o.a.createElement(pe,{className:"la-dark"})):!1===this.props.isLoggedIn?o.a.createElement(se,{login:this.props.logIn}):o.a.createElement(ce,{locationSupport:this.props.locationSupport,setLocation:this.setLocation,denyLocation:this.denyLocation})))}}]),a}(le),de=Object(u.b)((function(e){return{location:e.location.value,locationSupport:e.location.locationSupport,isLoggedIn:e.user.loggedIn,user:e.user.value}}),(function(e){return{setLocation:function(t){return e(te(t))},logIn:function(t){return e((a=t,function(e){e($({value:a,authToken:"asdf"}))}));var a}}}))(ue),me=(a(63),function(e){Object(p.a)(a,e);var t=Object(s.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(ie.a,{titleText:"Notification Modal",initialFocus:"#notification-confirm-button",getApplicationNode:this.getApplicationNode,underlayClickExits:!1,verticallyCenter:!0,underlayStyle:this.props.style},o.a.createElement("div",{id:"notification-dialog-root",className:"nes-dialog is-rounded modal custom-pointer"},o.a.createElement("p",{className:"nes-text"},this.props.data.message),o.a.createElement("button",{id:"notification-confirm-button",className:"nes-btn is-primary",onClick:this.props.clearNotification},"Okay!")))}}]),a}(le)),fe=Object(u.b)(void 0,(function(e){return{clearNotification:function(){return e(w())}}}))(me);var he=Object(u.b)((function(e){return{notifications:e.notifications.value}}))((function(e){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{id:"findr-root"},o.a.createElement("div",{id:"location-dialog"},o.a.createElement(de,{applicationNode:"location-dialog"})),!!e.notifications&&o.a.createElement("div",{id:"notification-dialog"},o.a.createElement(fe,{applicationNode:"notification-dialog",data:e.notifications})),o.a.createElement(oe,{className:"main-nav"}),o.a.createElement(J,{className:"main-content"})))})),ye=Object(v.a)({reducer:{location:ne,user:K,notifications:j}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(u.a,{store:ye},o.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.49b36811.chunk.js.map